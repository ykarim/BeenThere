(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,n){e.exports=n(91)},60:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(18),i=n.n(r),s=(n(60),n(13)),c=n(14),l=n(17),m=n(15),u=n(16),p=n(97),d=n(101),h=n(96),f=n(6),y=n(48),g=n(95),v=n(100),x=n(98),b=n(44),E=n.n(b),j=n(94),C=[{color:"#ffedfb",text:"Less Similar",textColor:"#000000"},"#ffe6f9","#ffe0f8",{color:"#ffdbf7",text:"More Similar",textColor:"#000000"}],w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"route",value:function(e){console.log(e),this.props.history.push("/".concat(e.dataid))}},{key:"render",value:function(){var e=this,t=this.props.data.map(function(e){return{_id:e._id,value:e.value,colorValue:e.sentiment,selected:e.selected,dataid:e.dataid}});return o.a.createElement(E.a,{className:"custom-chart",colorLegend:C,data:t,selectedColor:"#737373",selectedTextColor:"#d9d9d9",fixedDomain:{min:0,max:1},legend:!0,onClick:function(t){return e.route(t)}})}}]),t}(o.a.Component),O=Object(j.a)(w),k=n(45),P=n(27),T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={content:"",fetchMode:1,posts:[],hidden:[],voted:[]},n.onClickPostHandler=n.onClickPostHandler.bind(Object(f.a)(Object(f.a)(n))),n.onClickVoteHandler=n.onClickVoteHandler.bind(Object(f.a)(Object(f.a)(n))),n.fetchPosts=n.fetchPosts.bind(Object(f.a)(Object(f.a)(n))),n.openCommentsPage=n.openCommentsPage.bind(Object(f.a)(Object(f.a)(n))),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onClickPostHandler",value:function(e){e.preventDefault(),this.props.history.push("/Post")}},{key:"onClickVoteHandler",value:function(e,t){var n=this;if(!this.state.voted[t]){fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL,"/api/votePost"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({postId:e})}).then(function(e){return e.json()}).then(function(e){if(e&&e.success){var a=n.state.posts;a[t].counter+=1,n.setState({posts:a})}});var a=this.state.voted;a[t]=!0,this.setState({voted:a}),console.log(this.state.voted)}}},{key:"fetchPosts",value:function(){var e=this;console.log(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL),fetch("/api/getPosts").then(function(e){return e.json()}).then(function(t){if(t&&t.posts){var n=t.posts.map(function(e){return!0}),a=t.posts.map(function(e){return!1});e.setState({posts:t.posts,hidden:n,voted:a})}}).catch(function(e){console.log(e)})}},{key:"openCommentsPage",value:function(e){this.props.history.push("/".concat(e))}},{key:"show",value:function(e){var t=this.state.hidden;t[e]=!this.state.hidden[e],this.setState({hidden:t})}},{key:"changeMode",value:function(e){this.setState({fetchMode:e});var t=this.state.posts;1===e?(console.log("sort by time"),t.sort(function(e,t){return P(t.time).diff(P(e.time))})):(console.log("sort by count"),t.sort(function(e,t){return t.counter-e.counter}));var n=this.state.posts.map(function(e){return!0}),a=this.state.posts.map(function(e){return!1});this.setState({posts:t,hidden:n,voted:a}),console.log(t)}},{key:"renderPost",value:function(e,t){var n=this;return void 0===e.trigger||""===e.trigger.trim()?o.a.createElement("div",{style:{borderBottom:"1px solid #8c8c8c",marginBottom:"10px"},key:t},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},o.a.createElement("div",{style:{color:"#474747"}},P(e.time).fromNow()),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.a.createElement(y.a,{variant:"link",onClick:function(){return n.onClickVoteHandler(e._id,t)}},"I've Been There"),o.a.createElement("div",{style:{color:"#474747"}},e.counter))),o.a.createElement("div",{style:{marginBottom:"14px",display:"flex",flexDirection:"row"}},e.tags.map(function(e,t){return o.a.createElement("div",{style:{marginRight:"6px"}},o.a.createElement(g.a,{variant:"secondary"},e))})),e.text.split("\n").map(function(e,t){return o.a.createElement("p",{key:t},e)}),o.a.createElement("div",{className:"text-button",style:{color:"#474747",marginTop:"8px",marginBottom:"16px"},onClick:function(){return n.openCommentsPage(e._id)}},e.comments.length," comments")):this.state.hidden[t]?o.a.createElement("div",{style:{flexDirection:"column",paddingBottom:"10px",paddingTop:"4px",borderBottom:"1px solid #8c8c8c",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center"},key:t},o.a.createElement(v.a,{variant:"warning"},"This post may contain the following triggering topic(s): ",e.trigger),o.a.createElement(y.a,{variant:"link",onClick:function(){return n.show(t)}},"Show post")):o.a.createElement("div",{style:{borderBottom:"1px solid #8c8c8c",marginBottom:"10px"},key:t},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},o.a.createElement("div",{style:{color:"#474747"}},P(e.time).fromNow()),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.a.createElement(y.a,{variant:"link",onClick:function(){return n.onClickVoteHandler(e._id,t)}},"I've Been There"),o.a.createElement("div",{style:{color:"#474747"}},e.counter))),o.a.createElement("div",{style:{marginBottom:"14px",display:"flex",flexDirection:"row"}},e.tags.map(function(e,t){return o.a.createElement("div",{style:{marginRight:"6px"}},o.a.createElement(g.a,{variant:"secondary"},e))})),e.text.split("\n").map(function(e,t){return o.a.createElement("p",{key:t},e,o.a.createElement("br",null))}),o.a.createElement("div",{className:"text-button",style:{color:"#474747",marginTop:"8px",marginBottom:"16px"}},e.comments.length," comments"))}},{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},o.a.createElement("div",{style:{width:"65%",textAlign:"flex-start"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},o.a.createElement("h1",null,"Beeen There"),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50px"}},o.a.createElement(y.a,{variant:"outline-secondary",onClick:function(){return e.props.history.push("/Resources")}},"Resources"))),"We all go through hard times, and sometimes it's nice to simply know that you aren't alone. Post your stories of hard times to see similar stories. Warning! There may be triggering content below, please read with caution.",o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:"14px"}},"Sorting by",o.a.createElement(x.a,{title:1===this.state.fetchMode?"Recent":"Top",id:"basic-nav-dropdown"},o.a.createElement(x.a.Item,{onClick:function(){return e.changeMode(1)}},"Recent"),o.a.createElement(x.a.Item,{onClick:function(){return e.changeMode(0)}},"Top"))),o.a.createElement(y.a,{variant:"outline-primary",onClick:this.onClickPostHandler},"Post your story")),o.a.createElement("div",{style:{borderBottom:"1px solid #8c8c8c",marginTop:"12px",marginBottom:"12px"}}),this.state.posts.map(function(t,n){return e.renderPost(t,n)})))}}]),t}(a.Component),D=Object(k.a)(T),S=n(99),I=n(54),B=(n(86),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={text:"",trigger:"",isLoading:!1,show:!1,tags:[]},n.onChangeTextHandler=n.onChangeTextHandler.bind(Object(f.a)(Object(f.a)(n))),n.submitPost=n.submitPost.bind(Object(f.a)(Object(f.a)(n))),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onChangeTextHandler",value:function(e){this.setState({text:e.target.value})}},{key:"setTags",value:function(e){this.setState({tags:e})}},{key:"submitPost",value:function(e){var t=this;e.preventDefault(),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL,"/api/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({postContent:{text:this.state.text,time:(new Date).toString(),trigger:this.state.trigger,counter:0,tags:this.state.tags,comments:[]}})}).then(function(e){return e.json()}).then(function(e){e&&e.success&&(t.state.show?t.props.history.push({pathname:"/Graph",state:{text:t.state.text,tags:t.state.tags,id:e.post._id}}):t.props.history.push("/".concat(e.post._id)))})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px",flex:1}},o.a.createElement("div",{style:{width:"65%"}},o.a.createElement(S.a,{onSubmit:this.submitPost,style:{display:"flex",flex:.8}},o.a.createElement("div",{style:{flex:1}},o.a.createElement("h1",{style:{display:"inline-block",flex:1}},"Share"),o.a.createElement(S.a.Group,null,o.a.createElement(S.a.Control,{as:"textarea",rows:"3",onChange:this.onChangeTextHandler,value:this.state.text,placeholder:"Share your story here..."})),o.a.createElement("div",{style:{marginBottom:"14px"}},o.a.createElement("div",{style:{marginBottom:"6px"}},"Topics (tags)"),o.a.createElement(I.a,{tags:this.state.tags,onChange:function(t){return e.setTags(t)}})),o.a.createElement("div",{style:{width:"50%"}},o.a.createElement(S.a.Group,null,o.a.createElement(S.a.Label,null,"Sensitive (possibly triggering) topics"),o.a.createElement(S.a.Control,{type:"text",placeholder:"Leave blank if none",onChange:function(t){return e.setState({trigger:t.target.value})}}))),o.a.createElement(S.a.Group,{controlId:"formBasicCheckbox"},o.a.createElement(S.a.Check,{type:"checkbox",label:"I would like to see stories like mine",onChange:function(t){return e.setState({show:t.target.value})}}),o.a.createElement("sub",null,"If checked, you may see potentially triggering content after sharing.")),o.a.createElement("div",{style:{flex:1,display:"flex",marginTop:"20px"}},o.a.createElement(y.a,{variant:"primary",type:"submit"},"Share your story"))))))}}]),t}(o.a.Component)),_=Object(k.a)(B),L=(n(27),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={data:[{_id:n.props.location.state.text,value:20,sentiment:1,selected:!1,similar:[],dataid:n.props.location.state.id}]},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"fetchPosts",value:function(){var e=this;console.log("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL,"/api/getPosts")),console.log("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL)),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL,"/api/getPosts")).then(function(e){return e.json()}).then(function(t){if(t&&t.posts){for(var n=[],a=0;a<t.posts.length;a++){var o=t.posts[a],r=0;if(void 0!==o.tags&&e.props.location.state.text!==o.text)for(var i=0;i<o.tags.length;i++){var s=o.tags[i].toLowerCase(),c=e.props.location.state.tags;console.log(c);for(var l=0;l<c.length;l++){var m=c[l].toLowerCase();console.log(m+" vs "+s),m===s&&(r+=1)}}r>0&&(console.log("WOWO"),n=n.concat([{_id:o.text,dataid:o._id,value:7+2*r,sentiment:r/e.props.location.state.tags.length,selected:!1}]),r=0)}setTimeout(function(){console.log(n),n.length>0&&this.setState({data:this.state.data.concat(n)})}.bind(e),1e3)}}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{style:{height:"800px",width:"100%",padding:"0px",paddingTop:"20px",display:"flex",flexDirection:"row",justifyContent:"center"}},o.a.createElement(O,{data:this.state.data}))}}]),t}(a.Component)),N=n(27),R=n.n(N),A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={post:{},commentText:"",voted:!1},n.fetchPostData=n.fetchPostData.bind(Object(f.a)(Object(f.a)(n))),n.comment=n.comment.bind(Object(f.a)(Object(f.a)(n))),n.onChangeTextHandler=n.onChangeTextHandler.bind(Object(f.a)(Object(f.a)(n))),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"fetchPostData",value:function(e){var t=this;console.log("fdsfds"),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL,"/api/getPost/")+e).then(function(e){return e.json()}).then(function(e){if(e.success){var n=e.post;n.comments=e.post.comments.reverse(),t.setState({commentText:"",post:n}),console.log(t.state.commentText)}}).catch(function(e){return console.log(e)})}},{key:"onClickVoteHandler",value:function(e,t){var n=this;this.state.voted||(fetch("http://localhost:5000/api/votePost",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({postId:e})}).then(function(e){return e.json()}).then(function(e){if(e&&e.success){var t=n.state.post;t.counter+=1,n.setState({post:t})}}),this.setState({voted:!0}))}},{key:"componentDidMount",value:function(){this.fetchPostData(this.props.match.params.post)}},{key:"onChangeTextHandler",value:function(e){this.setState({commentText:e.target.value})}},{key:"comment",value:function(e){var t=this;e.preventDefault(),fetch("http://localhost:5000/api/commentPost",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({comment:this.state.commentText,postId:this.state.post._id})}).then(function(e){return e.json()}).then(function(e){e&&e.success&&t.fetchPostData(t.props.match.params.post)})}},{key:"renderPostCard",value:function(e){var t=this;if(e&&e.text)return o.a.createElement("div",{style:{borderBottom:"1px solid #8c8c8c",marginBottom:"10px"}},o.a.createElement("h1",{style:{cursor:"pointer"},onClick:function(){return t.props.history.push("/")}},"Been There"),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},o.a.createElement("div",{style:{color:"#474747"}},R()(e.time).fromNow()),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.a.createElement(y.a,{variant:"link",onClick:function(){return t.onClickVoteHandler(e._id)}},"I've Been There"),o.a.createElement("div",{style:{color:"#474747"}},e.counter))),o.a.createElement("div",{style:{marginBottom:"14px",display:"flex",flexDirection:"row"}},e.tags.map(function(e,t){return o.a.createElement("div",{style:{marginRight:"6px"}},o.a.createElement(g.a,{variant:"secondary"},e))})),e.text.split("\n").map(function(e,t){return o.a.createElement("p",{key:t},e)}),o.a.createElement("div",{style:{color:"#474747",marginTop:"8px",marginBottom:"16px"}},e.comments.length," comments"))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},o.a.createElement("div",{style:{width:"65%",textAlign:"flex-start"}},o.a.createElement("div",{style:{flex:.8,flexDirection:"row"}},this.renderPostCard(this.state.post)),o.a.createElement("div",null,o.a.createElement("h3",{style:{display:"inline-block",flex:1,marginBottom:"10px"}},"Comments"),o.a.createElement(S.a,{onSubmit:function(t){return e.comment(t)}},o.a.createElement(S.a.Group,null,o.a.createElement(S.a.Control,{style:{marginBottom:"10px"},as:"textarea",rows:"3",onChange:this.onChangeTextHandler,value:this.state.commentText,placeholder:"Share your stories or words of encouragement here..."}),o.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},o.a.createElement(y.a,{disabled:""===this.state.commentText,variant:"primary",type:"submit",onClick:function(t){return e.comment(t)}},"Comment")))),this.state.post&&this.state.post.comments?this.state.post.comments.map(function(e,t){return o.a.createElement("div",{style:{marginTop:"10px"}},e)}):null)))}}]),t}(o.a.Component),H=(n(27),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},o.a.createElement("div",{style:{width:"65%",textAlign:"flex-start",display:"flex",flexDirection:"column",justifyContent:"flex-start"}},o.a.createElement("h1",{style:{cursor:"pointer"},onClick:function(){return e.props.history.push("/")}},"Resources"),"Please check out the resources below if you are experiencing any of the issues below.",o.a.createElement("h4",{style:{marginTop:"20px"}},"Suicide"),o.a.createElement("a",{href:"https://suicidepreventionlifeline.org"},"Suicide Prevention Lifeline"),o.a.createElement("a",{href:"https://www.sprc.org"},"Suicide Prevention Resources Center"),o.a.createElement("a",{href:"https://www.translifeline.org/"},"Trans Lifeline"),o.a.createElement("h4",{style:{marginTop:"20px"}},"Depression"),o.a.createElement("a",{href:"https://www.mhanational.org/depression-support-and-advocacy"},"Mental Health America"),o.a.createElement("a",{href:"https://nndc.org/resource-links/"},"National Network of Depression Centers"),o.a.createElement("a",{href:"https://adaa.org/living-with-anxiety/ask-and-learn/resources/"},"AADA"),o.a.createElement("h4",{style:{marginTop:"20px"}},"Substance Abuse"),o.a.createElement("a",{href:"https://www.samhsa.gov/find-help/national-helpline"},"National Helpline"),o.a.createElement("a",{href:"https://www.drugabuse.gov/publications/principles-drug-addiction-treatment-research-based-guide-third-edition/resources"},"DrugAbuse.gov"),o.a.createElement("a",{href:"https://www.addictioncenter.com/community-resources/"},"Addiction Center"),o.a.createElement("h4",{style:{marginTop:"20px"}},"Anxiety"),o.a.createElement("a",{href:"https://www.everydayhealth.com/anxiety/guide/resources/"},"Anxiety Resources"),o.a.createElement("a",{href:"https://www.rtor.org/anxiety/"},"RTOR")))}}]),t}(a.Component)),U=(n(89),n(90),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(d.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:D}),o.a.createElement(h.a,{exact:!0,path:"/Post",component:_}),o.a.createElement(h.a,{exact:!0,path:"/Graph",component:L}),o.a.createElement(h.a,{exact:!0,path:"/Resources",component:H}),o.a.createElement(h.a,{exact:!0,path:"/:post",component:A}))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,1,2]]]);
//# sourceMappingURL=main.c2f19882.chunk.js.map